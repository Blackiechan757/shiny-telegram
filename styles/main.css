@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400;1,600&family=Cinzel:wght@500;700&family=Cormorant+Garamond:ital,wght@0,500;0,700&family=Lato:wght@400;700&display=swap');

:root {
    --bg-deep: #020202;
    --glass-bg: rgba(10, 10, 10, 0.92);
    --glass-border: 1px solid rgba(255, 215, 0, 0.15);
    --glass-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
    --text-main: #ffffff;
    --text-sub: #9ca3af;
    --text-gold: #ffdb4d;
    --text-input-bg: rgba(30, 30, 30, 0.8);
    --text-input-border: rgba(255, 255, 255, 0.1);
}

body.light { 
    --bg-deep: #f8f5fa; 
    --glass-bg: rgba(255, 255, 255, 0.85); 
    --glass-border: 1px solid rgba(212, 175, 55, 0.3);
    --glass-shadow: 0 10px 30px rgba(88, 28, 135, 0.1);
    --text-main: #2e1065; 
    --text-sub: #4b5563;
    --text-gold: #b45309; 
    --text-input-bg: #ffffff;
    --text-input-border: rgba(180, 83, 9, 0.2);
}

html, body { height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden; background: var(--bg-deep); color: var(--text-main); font-family: 'Inter', sans-serif; transition: background 0.5s ease, color 0.5s ease; }

/* LAYOUT */
#sidebar { position: fixed; top: 0; left: 0; bottom: 0; width: 280px; z-index: 100; background: var(--bg-deep); border-right: 1px solid var(--glass-border); transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; }
#sidebar.open { transform: translateX(0); }
#drawerOverlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 90; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
#drawerOverlay.active { opacity: 1; pointer-events: auto; }
#mainContent { position: absolute; inset: 0; display: flex; flex-direction: column; z-index: 10; }
.tab-content { flex-grow: 1; overflow: hidden; padding: 0; height: 100%; display: none; }
.glass-panel { background: var(--glass-bg); border: var(--glass-border); border-radius: 12px; box-shadow: var(--glass-shadow); display: flex; flex-direction: column; transition: all 0.3s; }

/* TREE */
.tree-node { padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; color: var(--text-sub); display: flex; align-items: center; transition: all 0.2s; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
.tree-node:hover { background: rgba(125,125,125,0.1); color: var(--text-main); }
.tree-node.active { background: linear-gradient(90deg, rgba(212, 175, 55, 0.15), transparent); border-left: 2px solid var(--text-gold); color: var(--text-gold); font-weight: 600; }
.tree-children { margin-left: 14px; border-left: 1px solid var(--glass-border); }

/* INPUTS */
input, textarea, select { background-color: var(--text-input-bg) !important; border: 1px solid var(--text-input-border) !important; color: var(--text-main) !important; font-weight: 500; transition: all 0.3s; }
input:focus, textarea:focus { border-color: var(--text-gold) !important; outline: none; box-shadow: 0 0 0 1px var(--text-gold); }
input::placeholder { color: var(--text-sub); opacity: 0.5; }

/* EDITOR & TYPESETTING */
.typewriter-active textarea { padding-top: 50vh !important; padding-bottom: 50vh !important; scroll-behavior: smooth; }
.book-page-simulation { width: 400px; height: 600px; padding: 3rem; box-shadow: 0 20px 50px rgba(0,0,0,0.5); transition: all 0.3s ease; overflow: hidden; display: flex; flex-direction: column; }
.paper-white { background-color: #ffffff; color: #111; }
.paper-cream { background-color: #fdfbf7; color: #2d2a26; }
.paper-parchment { background-color: #f3e5ab; color: #3e3b32; }
.has-drop-cap::first-letter { float: left; font-size: 3.5em; line-height: 0.8; padding-right: 0.1em; font-family: 'Playfair Display', serif; font-weight: bold; }

/* NEXUS CARDS */
.nexus-card { background: rgba(125,125,125,0.05); border: 1px solid var(--glass-border); border-radius: 12px; padding: 1rem; transition: all 0.3s; display: flex; flex-direction: column; gap: 0.5rem; }
.nexus-card:hover { transform: translateY(-2px); border-color: var(--text-gold); }
.card-idea { border-left: 3px solid #a855f7; }
.card-research { border-left: 3px solid #3b82f6; }
.card-prism { border-left: 3px solid #14b8a6; }
.prism-row { display: flex; justify-content: space-between; font-size: 0.7rem; border-bottom: 1px solid rgba(125,125,125,0.1); padding-bottom: 2px; }
.prism-val { text-align: right; color: var(--text-sub); }

/* UTILS */
#dustCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; mix-blend-mode: overlay; }
#toast.active { opacity: 1; transform: translate(-50%, 0); background: var(--bg-deep); border: 1px solid var(--text-gold); color: var(--text-main); }
.glass-button { border: 1px solid var(--glass-border); color: var(--text-main); background: rgba(125,125,125,0.05); transition: all 0.2s; }
.glass-button:hover { border-color: var(--text-gold); color: var(--text-gold); }
.tab-active { background: linear-gradient(90deg, rgba(139, 92, 246, 0.1), transparent); border-left: 3px solid var(--text-gold); color: var(--text-main) !important; font-weight: 700; }
.modal { background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
.modal > div { background: var(--glass-bg); border: var(--glass-border); color: var(--text-main); }
.custom-scrollbar { overflow-y: auto; }
.custom-scrollbar::-webkit-scrollbar { width: 4px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 3px; }
