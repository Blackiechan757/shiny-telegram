@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400;1,600&family=Cinzel:wght@500;700&family=Cormorant+Garamond:ital,wght@0,500;0,700&family=Lato:wght@400;700&family=JetBrains+Mono:wght@400&display=swap');

:root {
    --bg-deep: #020202;
    --glass-bg: rgba(20, 20, 20, 0.95);
    --glass-border: 1px solid rgba(255, 255, 255, 0.1);
    --text-main: #f3f3f3;
    --text-sub: #a1a1aa;
    --accent: #ffdb4d;
    --input-bg: rgba(30, 30, 30, 0.8);
}

body.light {
    --bg-deep: #f8f5fa;
    --glass-bg: rgba(255, 255, 255, 0.95);
    --glass-border: 1px solid rgba(0, 0, 0, 0.1);
    --text-main: #2e1065;
    --text-sub: #52525b;
    --accent: #b45309;
    --input-bg: #ffffff;
}

html, body { height: 100%; width: 100%; margin: 0; overflow: hidden; background: var(--bg-deep); color: var(--text-main); font-family: 'Inter', sans-serif; transition: background 0.3s, color 0.3s; }

/* UTILS */
.glass-panel { background: var(--glass-bg); border: var(--glass-border); border-radius: 12px; }
.custom-scrollbar::-webkit-scrollbar { width: 4px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(128,128,128,0.3); border-radius: 2px; }
#dustCanvas { position: fixed; inset: 0; pointer-events: none; mix-blend-mode: overlay; z-index: 0; }

/* BUTTONS */
.icon-btn { padding: 0.5rem; color: var(--text-sub); border-radius: 0.5rem; transition: all 0.2s; }
.icon-btn:hover { color: var(--accent); background: rgba(255,255,255,0.05); }
.nav-btn { width: 100%; text-align: left; padding: 0.75rem; font-size: 0.75rem; color: var(--text-sub); border-radius: 0.375rem; transition: 0.2s; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }
.nav-btn:hover { background: rgba(255,255,255,0.05); color: var(--text-main); }
.oracle-tool-btn { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); color: #c084fc; font-size: 0.65rem; font-weight: bold; border-radius: 0.375rem; padding: 0.6rem; text-transform: uppercase; transition: 0.2s; }
.oracle-tool-btn:hover { background: rgba(139, 92, 246, 0.3); color: white; }
.ctx-btn { width: 100%; text-align: left; padding: 0.5rem 1rem; font-size: 0.75rem; color: #d1d5db; transition: 0.2s; }
.ctx-btn:hover { background: rgba(255,255,255,0.1); color: white; }

/* TREE */
.tree-node { padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; color: var(--text-sub); display: flex; align-items: center; user-select: none; -webkit-touch-callout: none; transition: 0.2s; }
.tree-node:hover { background: rgba(255,255,255,0.05); color: var(--text-main); }
.tree-node.active { background: linear-gradient(90deg, rgba(212, 175, 55, 0.15), transparent); border-left: 3px solid var(--accent); color: var(--accent); font-weight: 600; }
.tree-children { margin-left: 12px; border-left: 1px solid var(--glass-border); }

/* EDITOR */
textarea:focus { outline: none; }
.typewriter-active textarea { padding-top: 50vh !important; padding-bottom: 50vh !important; scroll-behavior: smooth; }

/* SYNTAX LENS */
.lens-active #editor { color: transparent !important; caret-color: var(--accent); }
.lens-active #editorOverlay { display: block; pointer-events: none; }
.hl-adv { color: #c084fc; font-weight: bold; }
.hl-pass { color: #f87171; font-weight: bold; text-decoration: underline; text-decoration-style: wavy; }
.hl-filt { color: #facc15; font-style: italic; }

/* MOSAIC */
.mosaic-card { background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 8px; padding: 1.5rem; height: 180px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; }
.mosaic-card:hover { transform: translateY(-3px); border-color: var(--accent); }
.mosaic-card h4 { font-family: 'Cinzel', serif; color: var(--accent); margin-bottom: 0.5rem; font-size: 0.9rem; }
.mosaic-card p { font-family: 'Inter', sans-serif; font-size: 0.7rem; color: var(--text-sub); overflow: hidden; display: -webkit-box; -webkit-line-clamp: 5; -webkit-box-orient: vertical; }

/* ANIMATION */
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in { animation: fadeIn 0.3s ease-out; }
#toast.active { opacity: 1; transform: translate(-50%, -20px); }
#ctxMenu.active { opacity: 1; transform: scale(1); }
